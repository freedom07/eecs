# 목차
1. 서론
2. 덧셈과 뺄셈
3. 곱셈
4. 나눗셈
5. 부동소수점

질문
- 정수나 십진수는 이진수로 표현될 수 있음을 봤는데 그럼 소수나 실수는 어떻게 표현할까?
- 컴퓨터로 표현할 수 있는 수보다 더 큰 수가 계산의 결과로 나오면 어떻게 처리할까?
- 하드웨어가 실제로 사칙연산을 어떻게 수행할까?

# 덧셈과 뺄셈
덧셈은 그냥 이진수 덧셈하면되고 뺄셈은 십진수 뺄샘처럼 빼거나 아니면 -가 붙은 피연산자를 2의 보수법으로 표현한 뒤 더해도된다. 근데 오버플로가 일어나면 어떻게 탐지할 수 있을까?
- 먼저 컴퓨터에서 2의 보수법을 사용할 때 발생하는 오버플로에 대해 알아보자. 워드 크기가 32비트이므로 33번째 비트는 표시할 수 없는데, 만약 32비트 피연산자 두개를 더하거나 뺐을 때 33비트가 되었을때는 부호 비트가 사라진다. 따라서 두 양수를 더한 값이 음수가 되거나, 두 음수를 더했는데 합이 앙수가 되는 경우에는 오버플로가 발생한 것이라 생각할 수 있다.
- 반대로 부호없는 정수에서는 예외를 일으키거나 무시하는데 MIPS에서는 예외와 무시 중 하나를 선택하도록 지원하기 위해 두가지 산술 명령어를 제공한다. 참고로만 알아두자.
  - add, addi, sub 명령어들은 오버플로가 발생하면 예외 exception을 발생시킨다.
  - addu(add unsigned), addiu(add immediate unsigned), subu 명령어들은 오버플로를 발생해도 exception을 발생시키지 않는다.

컴퓨터 설계자는 연산 오버플로를 어떻게 처리해야할지 결정해야하는데, c나 java 같은 언어들은 정수 오버플로를 무시하지만 ada나 fortran 같은 언어는 프로그램에서 알려지기를 요구한다. 그래서 프로그래머는 오버플로가 발생했을 때 어떻게 할 것인지를 결정해야만한다. c언어는 오버플로를 무시하기 때문에 MIPS C 컴파일러는 변수의 형에 관계없이 언제나 부호없는 버전인 addu, addiu, subu 명령어를 생성하지만 MIPS Fortran 컴파일러는 피연산자의 데이터 형에 따라 적절한 산술명령어를 생성한다. 이처럼 오버플로 탐지를 요구하는 소프트웨어 프로그램이 있으므로 오늘날의 모든 컴퓨터는 각자만의 오버플로 탐지 방법을 가지고 있다.

중요한 용어를 하나 알아두자. 인터럽트(그냥 예외라고 부르기도 하지만 음의 정의를 가진 좀 더 특수한 예외다)라고 하는 단어는 프로세서(cpu) 외부에서 발생하는 예외로 계획되지 않은 프로시저의 호출이다. 5장에서 인터럽트가 발생하는 다른 경우도 살펴보는데 운영체제에서 인터럽트는 굉장히 중요한 개념이니 알아두도록하자. 실제로 MIPS에는 EPC(exception program counter)라고 불리는 레지스터가 있어서 인터럽트가 걸린 명령어의 주소를 기억하는데 사용한다.

# 곱셈
10진수 곱셈처럼 곱셈 하드웨어도 단순히 다리이동과 덧셈을 수행한다.
MIP는 64비트 곱을 저장할 수 있는 2개의 32비트 레지스터를 제공한다. 이것은 각각 Hi와 Lo 레지스터로 불린다. MIPS는 mult(multiply)와 multu(multiply unsigned)의 2개의 곱셈 명령어를 제공하는데, 이는 둘 다 오버플로를 무시한다. 따라서 곱이 32비트에 들어갈 수 있을지 없을지를 검사하는 것은 소프트웨어의 몫이다. multu 수행 결과 Hi와 Lo의 부호와 같은 비트 32개로 채워져 있다면 오버플로가 아니다. 자세한건 책을 참고하자.

# 나눗셈
곱셈의 역연산인 나눗셈은 사용빈도는 낮은데 훨씬 까다롭다. 심지어는 0으로 나누기와 같이 수학적으로 유효하지 않은 연산을 하는 경우도 생긴다.  MIPS는 32비트 Hi와 Lo 레지스터를 곱셈과 나눗셈용 64비트 레지스터로 사용한다. 위의 알고리즘에서 예측할 수 있읏이 나눗셈 명령이 완료된 뒤 Hi는 나머지를, Lo는 몫을 갖는다. 부호있는 정수와 부호없는 정수를 모두 다루기 위해 MIPS에서는 두가지 명령어 div(divide)와 divu(divide unsigned)가 있다. MIPS 나눗셈 명령은 오버플로를 무시하므로, 몫이 너무커서 오버플로가 발생하는 경우는 소프트웨어로 검사해야한다. 나눗셈은 오버플로를 발생시킬 뿐만 아니라, 0으로 나누기 연산같은 부적절한 연산을 초래하기도 하는데 이 두가지 비정상적인 상황을 구별하는 컴퓨터도 있지만 MIPS에서는 오버플로나 0으로 나누기를 소프트웨어로 검사해야한다.

똑같은 순차 하드웨어가 곱셈과 나눗셈 모두에 이용될 수 있음을 보았다. 왼쪽이나 오른쪽으로 자리이동할 수 있는 64비트 레지스터와 덧셈과 뺄셈을 할 수 있는 32비트 ALU만 있으면 된다.

